<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="theme-color" content="#1976d2">
  <title>FiberOMS Insight</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/icons/icon.svg">
  <link rel="manifest" href="/manifest.json">

  <!-- ArcGIS Map SDK theme stylesheets -->
  <link id="esri-theme-light" rel="stylesheet" href="/node_modules/@arcgis/core/assets/esri/themes/light/main.css" />
  <link id="esri-theme-dark" rel="stylesheet" href="/node_modules/@arcgis/core/assets/esri/themes/dark/main.css"
    disabled />

  <link rel="stylesheet" href="/src/style.css">
</head>

<body>
  <div id="app">
    <!-- Calcite Shell Layout -->
    <calcite-shell>
      <!-- Header Navigation -->
      <calcite-navigation slot="header">
        <calcite-navigation-logo slot="logo" heading="FiberOMS Insight" thumbnail=""></calcite-navigation-logo>
        <div slot="content-end">
          <calcite-button id="theme-toggle" icon-start="brightness" appearance="transparent" scale="m"
            aria-label="Toggle theme"></calcite-button>
        </div>
      </calcite-navigation>

      <!-- Dashboard Bar -->
      <div slot="header" id="dashboard-bar" class="dashboard-bar">
        <calcite-panel class="dashboard-panel">
          <div class="dashboard-metrics">
            <calcite-chip class="metric-item offline-metric" value="offline" appearance="solid" scale="s">
              <calcite-icon slot="icon" icon="circle" scale="s"></calcite-icon>
              <span class="metric-count" id="offline-count">--</span>
              <span class="metric-label">Offline</span>
            </calcite-chip>

            <calcite-chip class="metric-item power-metric" value="power" appearance="solid" scale="s">
              <calcite-icon slot="icon" icon="flash" scale="s"></calcite-icon>
              <span class="metric-count" id="power-outages">--</span>
              <span class="metric-label">Power</span>
            </calcite-chip>

            <calcite-chip class="metric-item fiber-metric" value="fiber" appearance="solid" scale="s">
              <calcite-icon slot="icon" icon="warning" scale="s"></calcite-icon>
              <span class="metric-count" id="fiber-outages">--</span>
              <span class="metric-label">Fiber</span>
            </calcite-chip>

            <calcite-chip class="metric-item vehicle-metric" value="vehicles" appearance="solid" scale="s">
              <calcite-icon slot="icon" icon="car" scale="s"></calcite-icon>
              <span class="metric-count" id="active-vehicles">--</span>
              <span class="metric-label">Vehicles</span>
            </calcite-chip>

            <calcite-chip class="metric-item weather-metric" id="weather-alert" value="weather" appearance="solid"
              scale="s" style="display: none;">
              <calcite-icon slot="icon" icon="weather" scale="s"></calcite-icon>
              <span class="metric-label" id="weather-text">Weather Alert</span>
            </calcite-chip>
          </div>

          <div class="dashboard-actions" slot="actions-end">
            <calcite-button id="refresh-dashboard" icon-start="refresh" appearance="transparent" scale="s"
              aria-label="Refresh dashboard"></calcite-button>
            <calcite-button id="dashboard-settings" icon-start="gear" appearance="transparent" scale="s"
              aria-label="Dashboard settings"></calcite-button>
          </div>
        </calcite-panel>
      </div>

      <!-- Side Panel - Desktop Only -->
      <calcite-shell-panel slot="panel-start" id="layers-panel" collapsed display-mode="dock" class="desktop-only">
        <calcite-action-bar slot="action-bar">
          <calcite-action id="layers-action" text="Layers" icon="layer" active></calcite-action>
          <calcite-action id="search-action" text="Search" icon="search"></calcite-action>
          <calcite-action id="tools-action" text="Tools" icon="apps"></calcite-action>
        </calcite-action-bar>
        <calcite-panel heading="Layers" id="layers-content">
          <calcite-block heading="Subscriber Status" collapsible>
            <calcite-label>
              <calcite-checkbox></calcite-checkbox>
              Online Subscribers
            </calcite-label>
            <calcite-label>
              <calcite-checkbox checked></calcite-checkbox>
              Offline Subscribers
            </calcite-label>
          </calcite-block>
          <calcite-block heading="Fiber Infrastructure" collapsible>
            <calcite-label>
              <calcite-checkbox></calcite-checkbox>
              FSA Boundaries
            </calcite-label>
            <calcite-label>
              <calcite-checkbox></calcite-checkbox>
              Main Line Fiber
            </calcite-label>
            <calcite-label>
              <calcite-checkbox></calcite-checkbox>
              MST Terminals
            </calcite-label>
            <calcite-label>
              <calcite-checkbox></calcite-checkbox>
              Splitters
            </calcite-label>
            <calcite-label>
              <calcite-checkbox></calcite-checkbox>
              Drop Fiber
            </calcite-label>
          </calcite-block>
          <calcite-block heading="Outage Data" collapsible>
            <calcite-label>
              <calcite-checkbox></calcite-checkbox>
              Fiber Network Outages
            </calcite-label>
            <calcite-label>
              <calcite-checkbox></calcite-checkbox>
              APCo Power Outages
            </calcite-label>
            <calcite-label>
              <calcite-checkbox></calcite-checkbox>
              Tombigbee Power Outages
            </calcite-label>
          </calcite-block>
          <calcite-block heading="Vehicle Tracking" collapsible>
            <calcite-label>
              <calcite-checkbox></calcite-checkbox>
              Electric Vehicles
            </calcite-label>
            <calcite-label>
              <calcite-checkbox></calcite-checkbox>
              Fiber Vehicles
            </calcite-label>
          </calcite-block>
          <calcite-block heading="Environmental" collapsible>
            <calcite-label>
              <calcite-checkbox></calcite-checkbox>
              Weather Radar
            </calcite-label>
          </calcite-block>
        </calcite-panel>
        <calcite-panel heading="Search" id="search-content" hidden>
          <calcite-block heading="MFS Database Search">
            <calcite-input placeholder="Search addresses, customers..." type="search"></calcite-input>
            <calcite-button width="full" appearance="solid" scale="s">Search</calcite-button>
          </calcite-block>
        </calcite-panel>
        <calcite-panel heading="Tools" id="tools-content" hidden>
          <calcite-block heading="Sketch Tools">
            <calcite-button width="full" icon-start="polygon" scale="s">Draw Outage Area</calcite-button>
            <calcite-button width="full" icon-start="download" scale="s">Export CSV</calcite-button>
          </calcite-block>
        </calcite-panel>
      </calcite-shell-panel>

      <!-- Main Content Area -->
      <div class="map-container">
        <arcgis-map id="map" basemap="streets-navigation-vector" center="-87.733,34.05" zoom="9" theme="light">
          <arcgis-search position="top-left" theme="light"></arcgis-search>
          <arcgis-track position="top-left" theme="light"></arcgis-track>
          <arcgis-home position="top-left" theme="light"></arcgis-home>
          <arcgis-locate position="top-left" theme="light"></arcgis-locate>
          <arcgis-basemap-toggle position="bottom-right" next-basemap="satellite" theme="light"></arcgis-basemap-toggle>
          <arcgis-expand position="top-left" theme="light" icon="basemap" tooltip="Basemap Gallery">
            <arcgis-basemap-gallery theme="light"></arcgis-basemap-gallery>
          </arcgis-expand>
          <arcgis-fullscreen position="top-left" theme="light"></arcgis-fullscreen>
        </arcgis-map>
      </div>

      <!-- Mobile Bottom Navigation -->
      <calcite-segmented-control id="mobile-tab-bar" class="mobile-only" width="full" appearance="outline" scale="l">
        <calcite-segmented-control-item id="tab-search" value="search"
          icon-start="search"></calcite-segmented-control-item>
        <calcite-segmented-control-item id="tab-subscribers" value="subscribers"
          icon-start="users"></calcite-segmented-control-item>
        <calcite-segmented-control-item id="tab-osp" value="osp"
          icon-start="link-chart"></calcite-segmented-control-item>
        <calcite-segmented-control-item id="tab-vehicles" value="vehicles"
          icon-start="car"></calcite-segmented-control-item>
        <calcite-segmented-control-item id="tab-other" value="other"
          icon-start="layers"></calcite-segmented-control-item>
      </calcite-segmented-control>
    </calcite-shell>

    <!-- Mobile Bottom Modals -->

    <!-- Search Modal -->
    <calcite-modal id="mobile-search-sheet" class="mobile-only" width-scale="l" scale="l" fullscreen>
      <div slot="header">Search</div>
      <div slot="content">
        <calcite-block heading="Quick Search" open>
          <calcite-input id="mobile-search-input" type="search" placeholder="Search addresses, customers, accounts..."
            icon="search" scale="l" clearable>
          </calcite-input>
        </calcite-block>

        <calcite-block heading="Recent Searches" open>
          <calcite-list selection-mode="none">
            <calcite-list-item label="123 Main Street" description="John Doe - Account #1234">
              <calcite-icon slot="content-start" icon="clock"></calcite-icon>
              <calcite-action slot="actions-end" icon="arrow-right"></calcite-action>
            </calcite-list-item>
            <calcite-list-item label="456 Oak Avenue" description="Jane Smith - Account #5678">
              <calcite-icon slot="content-start" icon="clock"></calcite-icon>
              <calcite-action slot="actions-end" icon="arrow-right"></calcite-action>
            </calcite-list-item>
          </calcite-list>
        </calcite-block>

        <calcite-block heading="Search Options" open>
          <calcite-button width="full" icon-start="person" appearance="outline">Search by Customer Name</calcite-button>
          <calcite-button width="full" icon-start="number" appearance="outline">Search by Account
            Number</calcite-button>
          <calcite-button width="full" icon-start="map-pin" appearance="outline">Search by Address</calcite-button>
        </calcite-block>
      </div>
      <calcite-button slot="primary" width="full" appearance="outline" icon-start="x"
        class="close-modal-btn">Close</calcite-button>
    </calcite-modal>

    <calcite-modal id="mobile-subscribers-sheet" class="mobile-only" width-scale="l" scale="l" fullscreen>
      <div slot="header">Subscribers</div>
      <div slot="content">
        <calcite-list selection-mode="none">
          <calcite-list-item label="Online Subscribers" description="Show active subscribers" class="layer-toggle-item">
            <calcite-icon slot="content-start" icon="circle"
              style="color: var(--calcite-color-status-success);"></calcite-icon>
            <calcite-switch slot="content-end" checked></calcite-switch>
          </calcite-list-item>

          <calcite-list-item label="Offline Subscribers" description="Show disconnected subscribers"
            class="layer-toggle-item">
            <calcite-icon slot="content-start" icon="circle"
              style="color: var(--calcite-color-status-danger);"></calcite-icon>
            <calcite-switch slot="content-end" checked></calcite-switch>
          </calcite-list-item>
        </calcite-list>

        <calcite-block heading="Tools" open>
          <calcite-button width="full" icon-start="refresh" appearance="outline" id="refresh-subscriber-data">Refresh
            Data</calcite-button>
          <calcite-button width="full" icon-start="search" appearance="outline">Search Customers</calcite-button>
          <calcite-button width="full" icon-start="download" appearance="outline">Export Offline CSV</calcite-button>
        </calcite-block>
      </div>
      <calcite-button slot="primary" width="full" appearance="outline" icon-start="x"
        class="close-modal-btn">Close</calcite-button>
    </calcite-modal>

    <calcite-modal id="mobile-osp-sheet" class="mobile-only" width-scale="l" scale="l" fullscreen>
      <div slot="header">OSP Infrastructure</div>
      <div slot="content">
        <calcite-block heading="Fiber Plant" open>
          <calcite-list selection-mode="none">
            <calcite-list-item label="FSA Boundaries" description="Service area boundaries" class="layer-toggle-item">
              <calcite-icon slot="content-start" icon="polygon"
                style="color: var(--calcite-color-brand);"></calcite-icon>
              <calcite-switch slot="content-end"></calcite-switch>
            </calcite-list-item>

            <calcite-list-item label="Main Line Fiber" description="Primary fiber routes" class="layer-toggle-item">
              <calcite-icon slot="content-start" icon="line" style="color: var(--calcite-color-info);"></calcite-icon>
              <calcite-switch slot="content-end"></calcite-switch>
            </calcite-list-item>

            <calcite-list-item label="MST Terminals" description="Multi-service terminals" class="layer-toggle-item">
              <calcite-icon slot="content-start" icon="circle"
                style="color: var(--calcite-color-warning);"></calcite-icon>
              <calcite-switch slot="content-end"></calcite-switch>
            </calcite-list-item>

            <calcite-list-item label="Splitters" description="Optical splitters" class="layer-toggle-item">
              <calcite-icon slot="content-start" icon="ellipsis"
                style="color: var(--calcite-color-success);"></calcite-icon>
              <calcite-switch slot="content-end"></calcite-switch>
            </calcite-list-item>

            <calcite-list-item label="Drop Fiber" description="Customer drop lines" class="layer-toggle-item">
              <calcite-icon slot="content-start" icon="line" style="color: var(--calcite-color-danger);"></calcite-icon>
              <calcite-switch slot="content-end"></calcite-switch>
            </calcite-list-item>
          </calcite-list>
        </calcite-block>

        <calcite-block heading="Outages" open>
          <calcite-list selection-mode="none">
            <calcite-list-item label="Fiber Network Outages" description="Current fiber outages"
              class="layer-toggle-item">
              <calcite-icon slot="content-start" icon="warning"
                style="color: var(--calcite-color-status-danger);"></calcite-icon>
              <calcite-switch slot="content-end"></calcite-switch>
            </calcite-list-item>

            <calcite-list-item label="APCo Power Outages" description="Alabama Power outages" class="layer-toggle-item">
              <calcite-icon slot="content-start" icon="flash"
                style="color: var(--calcite-color-status-warning);"></calcite-icon>
              <calcite-switch slot="content-end"></calcite-switch>
            </calcite-list-item>

            <calcite-list-item label="Tombigbee Power Outages" description="Tombigbee EPA outages"
              class="layer-toggle-item">
              <calcite-icon slot="content-start" icon="flash"
                style="color: var(--calcite-color-status-warning);"></calcite-icon>
              <calcite-switch slot="content-end"></calcite-switch>
            </calcite-list-item>
          </calcite-list>
        </calcite-block>

        <calcite-block heading="Tools" open>
          <calcite-button width="full" icon-start="polygon" appearance="outline">Draw Outage Area</calcite-button>
        </calcite-block>
      </div>
      <calcite-button slot="primary" width="full" appearance="outline" icon-start="x"
        class="close-modal-btn">Close</calcite-button>
    </calcite-modal>

    <calcite-modal id="mobile-vehicles-sheet" class="mobile-only" width-scale="l" scale="l" fullscreen>
      <div slot="header">Vehicle Tracking</div>
      <div slot="content">
        <calcite-list selection-mode="none">
          <calcite-list-item label="Electric Vehicles" description="Track electric fleet" class="layer-toggle-item">
            <calcite-icon slot="content-start" icon="flash" style="color: var(--calcite-color-info);"></calcite-icon>
            <calcite-switch slot="content-end"></calcite-switch>
          </calcite-list-item>

          <calcite-list-item label="Fiber Vehicles" description="Track fiber fleet" class="layer-toggle-item">
            <calcite-icon slot="content-start" icon="car" style="color: var(--calcite-color-success);"></calcite-icon>
            <calcite-switch slot="content-end"></calcite-switch>
          </calcite-list-item>
        </calcite-list>

        <calcite-block heading="Tools" open>
          <calcite-button width="full" icon-start="refresh" appearance="outline">Refresh Vehicle
            Locations</calcite-button>
          <calcite-button width="full" icon-start="information" appearance="outline">Vehicle Details</calcite-button>
        </calcite-block>
      </div>
      <calcite-button slot="primary" width="full" appearance="outline" icon-start="x"
        class="close-modal-btn">Close</calcite-button>
    </calcite-modal>

    <calcite-modal id="mobile-other-sheet" class="mobile-only" width-scale="l" scale="l" fullscreen>
      <div slot="header">Other Layers</div>
      <div slot="content">
        <calcite-block heading="Environmental" open>
          <calcite-list selection-mode="none">
            <calcite-list-item label="Weather Radar" description="Live weather overlay" class="layer-toggle-item">
              <calcite-icon slot="content-start" icon="layer" style="color: var(--calcite-color-info);"></calcite-icon>
              <calcite-switch slot="content-end"></calcite-switch>
            </calcite-list-item>
          </calcite-list>
        </calcite-block>

        <calcite-block heading="Base Maps" open>
          <calcite-radio-button-group name="basemap-selection" layout="vertical">
            <calcite-label layout="inline">
              <calcite-radio-button value="streets" checked></calcite-radio-button>
              Streets Navigation
            </calcite-label>
            <calcite-label layout="inline">
              <calcite-radio-button value="satellite"></calcite-radio-button>
              Satellite Imagery
            </calcite-label>
            <calcite-label layout="inline">
              <calcite-radio-button value="topographic"></calcite-radio-button>
              Topographic
            </calcite-label>
          </calcite-radio-button-group>
        </calcite-block>

        <calcite-block heading="Tools" open>
          <calcite-button width="full" icon-start="layer" appearance="outline">Layer Manager</calcite-button>
        </calcite-block>
      </div>
      <calcite-button slot="primary" width="full" appearance="outline" icon-start="x"
        class="close-modal-btn">Close</calcite-button>
    </calcite-modal>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>

</html>